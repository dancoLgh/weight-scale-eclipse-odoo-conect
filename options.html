<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Opciones – POS Weight</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 16px; max-width: 420px; }
    label { display:block; margin-top:10px; }
    input { width: 100%; padding: 6px; box-sizing: border-box; }
    button { margin-top:10px; padding:8px 12px; }
    #status { margin-left: 8px; font-size: 12px; color: #008000; }
  </style>
</head>
<body>
  <h3>Configuración</h3>
  <label>Prefijo (2 dígitos)
    <input id="opt-prefix" type="text" maxlength="2" placeholder="20" />
  </label>
  <label>Nº producto (5 dígitos)
    <input id="opt-product" type="text" maxlength="5" placeholder="00000" />
  </label>
  <button id="opt-save">Guardar</button><span id="status"></span>

  <script>
    const inpPref = document.getElementById("opt-prefix");
    const inpProd = document.getElementById("opt-product");
    const btnSave = document.getElementById("opt-save");
    const status  = document.getElementById("status");

    chrome.storage.sync.get({ prefix: "20", product: "00000" }, (prefs) => {
      inpPref.value = prefs.prefix;
      inpProd.value = prefs.product;
    });

    btnSave.addEventListener("click", () => {
      const prefix  = (inpPref.value || "").padStart(2, "0").slice(-2);
      const product = (inpProd.value || "").padStart(5, "0").slice(-5);
      chrome.storage.sync.set({ prefix, product }, () => {
        status.textContent = " Guardado ✔";
        setTimeout(() => (status.textContent = ""), 1200);
      });
    });
  </script>
</body>
</html>
